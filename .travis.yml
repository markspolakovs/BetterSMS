language: node_js
addons:
  chrome: stable
node_js:
- '10'
cache: yarn
script:
- yarn run build
after_success: 
  - set -u
  - openssl aes-256-cbc -k "${FILE_DECRYPTION_KEY}" -in packaging-key.pem.enc -out packaging-key.pem -d
  - google-chrome-stable --no-sandbox --pack-extension=dist --pack-extension-key=packaging-key.pem
  - mv dist.crx better-sms-${TRAVIS_COMMIT}.crx
deploy:
  provider: releases
  api_key:
    secure: "laVZ12KIblCG+m2P+m7gbJh/1Sbt+4oixymyNetjJ35wVz7hh64hqGJyLkJKbsL13kHKtYrSgUcPhlJ3ehH6Hs9JQPPCX9uaIQfKgngMW6x/DqUc4gXgVeRbNXCinyfX4xCVzawFDRA30yGEUs816tUZTH9qa+3ze9Z0IvET/dgLOAMjwrfqtuaJ8cuX5fiV2ioTWgHv0ff0ZJP3BISgc/XXZFF6dLem6Q7DOO+EqBuVRFBBLZ67uccsm8qMRUAljTI3oP8E9vVye4Bwn5K33BrmiuOJeoR6yauKlgXo4wx6kRf2QPfTtzZKx+jr+TJwinRWy6I7ojCvdA9JWIu4/HEQWB4TK7BMHL4BLWET3oeLngpRhN8I6kozxVQMrbjrmXsuEirxy0yetP4X/MbrlHwDOYZ3h8OUM/rMeC1GfZWGLBWccnHLTfV77b94agiuNa1CujOofq3Leomou1wZKm5oZM2jwOTAql2yhbFHO4NMxUa2BaaijVn3eSnbxRTal1GttnknY8obeWiVJ0ozYtVnp2SVyHXUHOWtVYoY/YfmanJ6uwrLG8t+rMB2gpeE0reRBkgCt4pVdYuPd20HxHELTSMR9Dsoa4sGMTSw/tZOVO2xLXPhrckeZVpKNmJ6BPQRfOKayVtCNZfgwveSm4M8a1ui9Q/YOhfp4PU4U4U="
  file: "better-sms-${TRAVIS_COMMIT}.crx"
  skip_cleanup: true
  prerelease: true
env:
  global:
    secure: iAeVnlo3MR9jTDB7uTlVZolOAbj97D0z+d6EWugq1um/gHRzejCtEaD6m+YcN8tr3x39nuOV471ht/3JtBiLA3WruDJCI4H1gX7mmr/pIiOcfHsPiRwazOkjLQ8+RpDVgpxoMoMtbFex9AjrU0dFns6XyfpTMfrXNSJlwaVI+CzBHz6217LtcCb8PiSm6TDz/KvgLyut73nbpszzDfrtwjxmEkAILaNH3HuK9RwNftY/gpTa3EfLMQxaZcFTFSKJUcHzJoFl09oGJpNdQBJGMv3TfCi4j9xWUL/XNfr/IUblyQBO3b+/wBYjquq1rr/XqFE0tG5viM6Cnsy4UrFOpig4N7fQEUy+69BmBwC8eUmln7NRq0uQa7abxteUlRCboN3sCpoYc7EReHmcorS/Feg9avZ1QEF4BE8ZqVIZnHskhQ+feokUZuhQB8rOXuaWpiGLnEb+r5MHu8zstowoR3UHwehiA9QlnV2Nc0nC2s6KF4kl38pgi/wSIGQAX6VGXm82Xox4dkOPFUV4O7sp5sD4fLsM7WM5VOpVZpuIRIxh4/IZ/r49ugH+jIQSquzwDNMSAQXgZfOw5wFaRwe2NcvrJ8waqFc8AwtYKZ1ndEK9JjZ0zXPSMtPvpuzEJlopgBe063d4it+0C/X8nkplpekq6nPatkU2UwrpSdOJtlY=
